$(function(){$(".authForm__signIn").hide(),$(".authForm__signUp").hide(),$(".auth__links_reg").click(function(){$(".authForm > form > input").val(""),$(".authForm> form > .msg").empty(),$(".authForm> form >.msg").css("display","none"),$(".signUp > .msg").removeClass("error_field"),$(".signUp > input").removeClass("error_field"),$(".authForm__signIn").hide(),$(".authForm__signUp").toggle()}),$(".auth__links_enter").click(function(){$(".authForm > form > input").empty(),$(".authForm> form > .msg").empty(),$(".authForm> form >.msg").css("display","none"),$(".signUp > .msg").removeClass("error_field"),$(".signUp > input").removeClass("error_field"),$(".authForm__signUp").hide(),$(".authForm__signIn").toggle()}),$(document).click(function(e){0===$(e.target).parents(".auth").length&&$(".authForm").hide()}),$("#signUp-Up").click(function(e){e.preventDefault();var i={login:$("#signUp-login").val(),password:$("#signUp-password").val(),passwordConfirm:$("#signUp-confirm_password").val()};$.ajax({type:"POST",data:JSON.stringify(i),contentType:"application/json",url:"/api/auth/registration"}).done(function(e){e.ok?$(location).attr("href","/"):($(".signUp>.msg").css("display","block"),$(".signUp>.msg").addClass("error_field"),$(".signUp>.msg").append(e.error),e.fields&&e.fields.forEach(function(e){$('input[name="signUp-'+e+'"]').addClass("error_field")}))})}),$("#signIn-In").click(function(e){e.preventDefault();var i={login:$("#signIn-login").val(),password:$("#signIn-password").val()};$.ajax({type:"POST",data:JSON.stringify(i),contentType:"application/json",url:"/api/auth/authorization"}).done(function(e){e.ok?$(location).attr("href","/"):($(".signIn>.msg").css("display","block"),$(".signIn>.msg").addClass("error_field"),$(".signIn>.msg").append(e.error),e.fields&&e.fields.forEach(function(e){$('input[name="signIn-'+e+'"]').addClass("error_field")}))})}),$(".authForm > form > input").focus(function(){$(".authForm > form >.msg").empty(),$(".authForm > form >.msg").css("display","none"),$(".authForm > form > .msg").removeClass("error_field"),$(".authForm > form > input").removeClass("error_field")})}),$(function(){$(".cabinet__menu>.menu").hide(),$(".cabinet__menu").click(function(){$(".cabinet__menu>.menu").toggle()}),$(document).click(function(e){0===$(e.target).parents(".auth").length&&$(".cabinet__menu>.menu").hide()})}),$(function(){function e(e){var i={title:$("#add-recipe__title").val(),ingredients:$("#add-recipe__ingredients").val(),fullRecipe:$("#add-recipe__fullRecipe").val(),photoPath:e};$.ajax({type:"POST",data:JSON.stringify(i),contentType:"application/json",url:"/cabinet/add_recipe"}).done(function(e){console.log(e),e.ok?$(location).attr("href","/cabinet"):($(".addRecipe>.msg").css("display","block"),$(".addRecipe>.msg").addClass("error_field"),$(".addRecipe>.msg").append(e.error),e.fields&&e.fields.forEach(function(e){$("#add-recipe__"+e).addClass("error_field")}))})}$("#addRecipe__form").on("submit",function(i){i.preventDefault();var o=new FormData(this);$.ajax({type:"post",url:"/upload/image",data:o,processData:!1,contentType:!1,success:function(i){e("/uploads/unchecked/"+i.ok)},error:function(e){console.log(e)}})}),$("#add-recipe__button").click(function(e){e.preventDefault(),$("#addRecipe__form").submit()}),$(".addRecipeForm > form > input").focus(function(){$(".addRecipeForm > form >.msg").empty(),$(".addRecipeForm > form >.msg").css("display","none"),$(".addRecipeForm > form > .msg").removeClass("error_field"),$(".addRecipeForm > form > input").removeClass("error_field"),$(".addRecipeForm > form > textarea").removeClass("error_field")}),$(".addRecipeForm > form > textarea").focus(function(){$(".addRecipeForm > form >.msg").empty(),$(".addRecipeForm > form >.msg").css("display","none"),$(".addRecipeForm > form > .msg").removeClass("error_field"),$(".addRecipeForm > form > input").removeClass("error_field"),$(".addRecipeForm > form > textarea").removeClass("error_field")}),$("#addRecipe__photo_form").on("submit",function(e){e.preventDefault();var i=new FormData(this);console.log(this),$.ajax({type:"post",url:"/upload/image",data:i,processData:!1,contentType:!1,success:function(e){console.log(e)},error:function(e){console.log(e)}})})}),$(function(){$(".newRecipes__button").click(function(e){e.preventDefault();var i=this.id[this.id.length-1];"none"==$("#newRecipes__recipe_"+i+" > .toggling").css("display")?($("#newRecipes__recipe_"+i+" > .toggling").css("display","block"),$("#newRecipes__recipe_"+i+" > .toggling__buttons").css("display","inline-block"),$("#"+this.id).text("Hide full recipe")):($("#newRecipes__recipe_"+i+" > .toggling").css("display","none"),$("#newRecipes__recipe_"+i+" > .toggling__buttons").css("display","none"),$("#"+this.id).text("Show full recipe"))}),$(".accept__button").click(function(e){e.preventDefault();var i=this.id[this.id.length-1];console.log(i);var o={id:$("#newRecipes__recipe_"+i+"> p.id").text(),title:$("#newRecipes__recipe_"+i+"> p.title").text(),ingredients:$("#newRecipes__recipe_"+i+"> p.ingredients").text(),fullRecipe:$("#newRecipes__recipe_"+i+"> p.fullRecipe").text(),author:$("#newRecipes__recipe_"+i+"> p.author").text(),photoPath:$("#newRecipes__recipe_"+i+"> p.photo > img").prop("src")};$.ajax({type:"post",url:"/cabinetAdmin/accept",data:JSON.stringify(o),contentType:"application/json",success:function(e){console.log(e)},error:function(e){console.log(e)}})})});